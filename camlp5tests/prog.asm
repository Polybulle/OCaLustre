        processor 18f4620

        include "p18f4620.inc"

	config	XINST = ON

CAML_STOP_AND_COPY_GC
STACK_SIZE  EQU   0x1
HEAP_SIZE   EQU   0x7

#define caml_useprim_caml_pic_set_bit
#define caml_useprim_caml_pic_clear_bit
#define caml_useprim_caml_pic_test_bit

        include "/usr/local/lib/ocapic/interp.asm"
        include "/usr/local/lib/ocapic/runtime.asm"

        org     0x1600
caml_externals:
        goto    caml_pic_set_bit
        goto    caml_pic_clear_bit
        goto    caml_pic_test_bit

caml_bytecode:
        db      0x54, 0x2b, 0x16, 0x29, 0x2a, 0x01, 0x01, 0x56
        db      0x26, 0x16, 0x01, 0x83, 0x03, 0x00, 0x21, 0x16
        db      0x00, 0x5d, 0x00, 0x28, 0x04, 0x00, 0x5d, 0x00
        db      0x28, 0x04, 0x00, 0x5d, 0x02, 0x28, 0x04, 0x2b
        db      0x01, 0x10, 0x16, 0x39, 0x00, 0x00, 0x67, 0x03
        db      0x02, 0x5d, 0x04, 0x56, 0x3e, 0x16, 0x63, 0x54
        db      0x3f, 0x16, 0x64, 0x6c, 0x03, 0x10, 0x36, 0x00
        db      0x00, 0x22, 0x67, 0x07, 0x02, 0x5d, 0x04, 0x56
        db      0x52, 0x16, 0x64, 0x54, 0x53, 0x16, 0x63, 0x6c
        db      0x07, 0x04, 0x36, 0x00, 0x00, 0x22, 0x8f
caml_globals_init_stack:
        db      0x01, 0x00
caml_globals_init_heap:
caml_globals_init_end:

        include "/usr/local/lib/ocapic/default-config.asm"
        include "/usr/local/lib/ocapic/stdlib.asm"

        end
